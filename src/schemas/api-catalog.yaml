# JSON Schema for an API Catalog based on RFC 9727
# This schema enforces the "Best Practice" of including both a versioned
# baseURL and an explicit semantic version string for each API entry.

$schema: http://json-schema.org/draft-07/schema#
$id: https://www.example.com/schemas/api-catalog.schema.yaml
title: API Catalog
description: A catalog of available APIs on a server, following RFC 9727 best practices.
type: object
properties:
  apis:
    type: array
    description: A list of available APIs.
    items:
      $ref: '#/definitions/apiEntry'
    minItems: 1

required:
  - apis

definitions:
  apiEntry:
    title: API Entry
    description: Describes a single available API, including its version.
    type: object
    properties:
      name:
        type: string
        description: A human-readable name for the API.
        examples:
          - Human Resources API
      description:
        type: string
        description: A short description of what the API does.
        examples:
          - API for managing employee data (stable version).
      baseURL:
        type: string
        description: The version-specific base URL for making API calls. This URL should point to a specific version of the API.
        format: uri
        examples:
          - https://www.example.com/res-a/v1
      version:
        type: string
        description: The explicit semantic version string (SemVer) of the API.
        pattern: '^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$'
        examples:
          - 1.0.0
          - 2.0.0-beta
      documentation:
        type: string
        description: A URL pointing to the human-readable documentation for this API version.
        format: uri
        examples:
          - https://docs.example.com/res-a/v1

    required:
      - name
      - description
      - baseURL
      - version