<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="710px" preserveAspectRatio="none" style="width:733px;height:710px;background:#FFFFFF;" version="1.1" viewBox="0 0 733 710" width="733px" zoomAndPan="magnify"><defs/><g><rect fill="#F8F8FF" height="698.7031" style="stroke:#181818;stroke-width:0.5;" width="285.9146" x="11" y="6"/><text fill="#000000" font-family="Helvetica" font-size="10" font-weight="bold" x="145.4954" y="15.2822">LEI</text><rect fill="#E6E6FA" height="682.0625" style="stroke:#181818;stroke-width:0.5;" width="285.9146" x="11" y="22.6406"/><text fill="#000000" font-family="Helvetica" font-size="10" font-weight="bold" x="114.8606" y="31.9229">Prim&#228;rsystem</text><rect fill="#F4A460" height="665.4219" style="stroke:#181818;stroke-width:0.5;" width="89" x="11" y="39.2813"/><text fill="#000000" font-family="Helvetica" font-size="10" font-weight="bold" x="23" y="48.5635">ZETA Client</text><rect fill="#C9FFC9" height="698.7031" style="stroke:#181818;stroke-width:0.5;" width="395.3506" x="308.9146" y="6"/><text fill="#000000" font-family="Helvetica" font-size="10" font-weight="bold" x="482.2295" y="15.2822">Anbieter</text><rect fill="#F4A460" height="682.0625" style="stroke:#181818;stroke-width:0.5;" width="284.2871" x="308.9146" y="22.6406"/><text fill="#000000" font-family="Helvetica" font-size="10" font-weight="bold" x="417.9136" y="31.9229">ZETA Guard</text><rect fill="#8FBC8F" height="682.0625" style="stroke:#181818;stroke-width:0.5;" width="99.0635" x="605.2017" y="22.6406"/><text fill="#000000" font-family="Helvetica" font-size="10" font-weight="bold" x="617.2017" y="31.9229">TI 2.0 Dienst</text><g><title>ZETA</title><rect fill="#000000" fill-opacity="0.00000" height="567.2188" width="8" x="52" y="93.2031"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="55.5" x2="55.5" y1="93.2031" y2="660.4219"/></g><g><title/><rect fill="#FFFFFF" height="451.375" style="stroke:#181818;stroke-width:1;" width="10" x="50.5" y="101.2031"/></g><g><title>ZETA Attestation Service</title><rect fill="#000000" fill-opacity="0.00000" height="567.2188" width="8" x="220.0732" y="93.2031"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="223.5732" x2="223.5732" y1="93.2031" y2="660.4219"/></g><g><title>PDP</title><rect fill="#000000" fill-opacity="0.00000" height="567.2188" width="8" x="367.8892" y="93.2031"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="371.3892" x2="371.3892" y1="93.2031" y2="660.4219"/></g><g><title/><rect fill="#FFFFFF" height="341.8125" style="stroke:#181818;stroke-width:1;" width="10" x="366.3892" y="210.7656"/></g><g><title>PDP DB</title><rect fill="#000000" fill-opacity="0.00000" height="567.2188" width="8" x="559.9517" y="93.2031"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="563.4517" x2="563.4517" y1="93.2031" y2="660.4219"/></g><g><title/><rect fill="#FFFFFF" height="115.4844" style="stroke:#181818;stroke-width:1;" width="10" x="558.4517" y="411.4531"/></g><g><title>Resource</title><rect fill="#000000" fill-opacity="0.00000" height="567.2188" width="8" x="651.2334" y="93.2031"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="654.7334" x2="654.7334" y1="93.2031" y2="660.4219"/></g><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42.9502" x="34.0249" y="54.9219"/><text fill="#000000" font-family="Helvetica" font-size="10" x="42.4409" y="71.2041">ZETA</text><text fill="#000000" font-family="Helvetica" font-size="10" x="41.0249" y="82.8447">Client</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138.6826" x="154.2319" y="54.9219"/><text fill="#000000" font-family="Helvetica" font-size="10" x="161.2319" y="71.2041">ZETA Attestation Service</text><text fill="#000000" font-family="Helvetica" font-size="10" x="187.7065" y="82.8447">(Admin rights)</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.9492" x="312.9146" y="54.9219"/><text fill="#000000" font-family="Helvetica" font-size="10" x="361.5088" y="71.2041">PDP</text><text fill="#000000" font-family="Helvetica" font-size="10" x="319.9146" y="82.8447">Authorization Server</text><rect fill="#E2E2F0" height="25.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51.5" x="537.7017" y="66.5625"/><text fill="#000000" font-family="Helvetica" font-size="10" x="544.7017" y="82.8447">PDP DB</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.5283" x="624.4692" y="54.9219"/><text fill="#000000" font-family="Helvetica" font-size="10" x="631.4692" y="71.2041">Resource</text><text fill="#000000" font-family="Helvetica" font-size="10" x="638.3369" y="82.8447">Server</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42.9502" x="34.0249" y="660.4219"/><text fill="#000000" font-family="Helvetica" font-size="10" x="42.4409" y="676.7041">ZETA</text><text fill="#000000" font-family="Helvetica" font-size="10" x="41.0249" y="688.3447">Client</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138.6826" x="154.2319" y="660.4219"/><text fill="#000000" font-family="Helvetica" font-size="10" x="161.2319" y="676.7041">ZETA Attestation Service</text><text fill="#000000" font-family="Helvetica" font-size="10" x="187.7065" y="688.3447">(Admin rights)</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.9492" x="312.9146" y="660.4219"/><text fill="#000000" font-family="Helvetica" font-size="10" x="361.5088" y="676.7041">PDP</text><text fill="#000000" font-family="Helvetica" font-size="10" x="319.9146" y="688.3447">Authorization Server</text><rect fill="#E2E2F0" height="25.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51.5" x="537.7017" y="660.4219"/><text fill="#000000" font-family="Helvetica" font-size="10" x="544.7017" y="676.7041">PDP DB</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.5283" x="624.4692" y="660.4219"/><text fill="#000000" font-family="Helvetica" font-size="10" x="631.4692" y="676.7041">Resource</text><text fill="#000000" font-family="Helvetica" font-size="10" x="638.3369" y="688.3447">Server</text><path d="M39.5,105.2031 L99.4561,105.2031 L99.4561,108.8438 L89.4561,118.8438 L39.5,118.8438 L39.5,105.2031" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="73.9219" style="stroke:#000000;stroke-width:1.5;" width="524.4082" x="39.5" y="105.2031"/><text fill="#000000" font-family="Helvetica" font-size="10" font-weight="bold" x="54.5" y="115.4854">alt</text><text fill="#000000" font-family="Helvetica" font-size="10" font-weight="bold" x="114.4561" y="116.4854">[Client has no Client Instance Key]</text><line style="stroke:#181818;stroke-width:1;" x1="60.5" x2="102.5" y1="158.125" y2="158.125"/><line style="stroke:#181818;stroke-width:1;" x1="102.5" x2="102.5" y1="158.125" y2="171.125"/><line style="stroke:#181818;stroke-width:1;" x1="61.5" x2="102.5" y1="171.125" y2="171.125"/><polygon fill="#181818" points="71.5,167.125,61.5,171.125,71.5,175.125,67.5,171.125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="Helvetica" font-size="10" x="67.5" y="147.9463">(01)</text><text fill="#000000" font-family="Helvetica" font-size="10" x="92.0273" y="142.126">Generate Client Instance</text><text fill="#000000" font-family="Helvetica" font-size="10" x="92.0273" y="153.7666">Key Pair</text><path d="M228.5732,133.8438 L228.5732,166.8438 L542.5732,166.8438 L542.5732,143.8438 L532.5732,133.8438 L228.5732,133.8438" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M532.5732,133.8438 L532.5732,143.8438 L542.5732,143.8438 L532.5732,133.8438" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Helvetica" font-size="10" x="234.5732" y="148.126">This key pair is long-lived for the client instance and</text><text fill="#000000" font-family="Helvetica" font-size="10" x="234.5732" y="159.7666">used for the private_key_jwt client authentication method.</text><polygon fill="#181818" points="354.3892,206.7656,364.3892,210.7656,354.3892,214.7656,358.3892,210.7656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="60.5" x2="360.3892" y1="210.7656" y2="210.7656"/><text fill="#000000" font-family="Helvetica" font-size="10" x="67.5" y="206.4072">(02)</text><text fill="#000000" font-family="Helvetica" font-size="10" x="92.0273" y="206.4072">POST /register</text><path d="M381.3892,223.7656 L381.3892,337.7656 L697.3892,337.7656 L697.3892,233.7656 L687.3892,223.7656 L381.3892,223.7656" fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><path d="M687.3892,223.7656 L687.3892,233.7656 L697.3892,233.7656 L687.3892,223.7656" fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Helvetica" font-size="10" x="387.3892" y="238.0479">DCR Request Body: {</text><text fill="#000000" font-family="Helvetica" font-size="10" x="393.7466" y="249.6885">"client_name": "myClient",</text><text fill="#000000" font-family="Helvetica" font-size="10" x="393.7466" y="261.3291">"grant_types": [</text><text fill="#000000" font-family="Helvetica" font-size="10" x="400.104" y="272.9697">"urn:ietf:params:oauth:grant-type:token-exchange",</text><text fill="#000000" font-family="Helvetica" font-size="10" x="400.104" y="284.6104">"refresh_token"</text><text fill="#000000" font-family="Helvetica" font-size="10" x="393.7466" y="296.251">],</text><text fill="#000000" font-family="Helvetica" font-size="10" x="393.7466" y="307.8916">"jwks": { "keys": [ &lt;Client_Instance_Public_Key_JWK&gt; ] },</text><text fill="#000000" font-family="Helvetica" font-size="10" x="393.7466" y="319.5322">"token_endpoint_auth_method": "private_key_jwt"</text><text fill="#000000" font-family="Helvetica" font-size="10" x="387.3892" y="331.1729">}</text><line style="stroke:#181818;stroke-width:1;" x1="376.3892" x2="418.3892" y1="361.1719" y2="361.1719"/><line style="stroke:#181818;stroke-width:1;" x1="418.3892" x2="418.3892" y1="361.1719" y2="374.1719"/><line style="stroke:#181818;stroke-width:1;" x1="377.3892" x2="418.3892" y1="374.1719" y2="374.1719"/><polygon fill="#181818" points="387.3892,370.1719,377.3892,374.1719,387.3892,378.1719,383.3892,374.1719" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="Helvetica" font-size="10" x="383.3892" y="356.8135">(03)</text><text fill="#000000" font-family="Helvetica" font-size="10" x="407.9165" y="356.8135">Generate client_id</text><polygon fill="#181818" points="546.4517,407.4531,556.4517,411.4531,546.4517,415.4531,550.4517,411.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="376.3892" x2="552.4517" y1="411.4531" y2="411.4531"/><text fill="#000000" font-family="Helvetica" font-size="10" x="383.3892" y="401.2744">(04)</text><text fill="#000000" font-family="Helvetica" font-size="10" x="407.9165" y="395.4541">Store Client Placeholder</text><text fill="#000000" font-family="Helvetica" font-size="10" x="407.9165" y="407.0947">with Public Key (JWKS)</text><path d="M573.4517,424.4531 L573.4517,503.4531 L726.4517,503.4531 L726.4517,434.4531 L716.4517,424.4531 L573.4517,424.4531" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M716.4517,424.4531 L716.4517,434.4531 L726.4517,434.4531 L716.4517,424.4531" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Helvetica" font-size="10" x="579.4517" y="438.7354">Store Client Placeholder</text><text fill="#000000" font-family="Helvetica" font-size="10" x="579.4517" y="450.376">client_id</text><text fill="#000000" font-family="Helvetica" font-size="10" x="579.4517" y="462.0166">client_name</text><text fill="#000000" font-family="Helvetica" font-size="10" x="579.4517" y="473.6572">public_key_jwks</text><text fill="#000000" font-family="Helvetica" font-size="10" x="579.4517" y="485.2979">...</text><text fill="#000000" font-family="Helvetica" font-size="10" x="579.4517" y="496.9385">state: pending_attestation</text><polygon fill="#181818" points="387.3892,522.9375,377.3892,526.9375,387.3892,530.9375,383.3892,526.9375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="381.3892" x2="557.4517" y1="526.9375" y2="526.9375"/><text fill="#000000" font-family="Helvetica" font-size="10" x="393.3892" y="522.5791">(05)</text><text fill="#000000" font-family="Helvetica" font-size="10" x="417.9165" y="522.5791">Client Placeholder Created</text><line style="stroke:#181818;stroke-width:1;" x1="61.5" x2="71.5" y1="552.5781" y2="548.5781"/><line style="stroke:#181818;stroke-width:1;" x1="61.5" x2="71.5" y1="552.5781" y2="556.5781"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="60.5" x2="365.3892" y1="552.5781" y2="552.5781"/><text fill="#000000" font-family="Helvetica" font-size="10" x="77.5" y="548.2197">(06)</text><text fill="#000000" font-family="Helvetica" font-size="10" x="102.0273" y="548.2197">201 Created</text><path d="M65.5,565.5781 L65.5,644.5781 L212.5,644.5781 L212.5,575.5781 L202.5,565.5781 L65.5,565.5781" fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><path d="M202.5,565.5781 L202.5,575.5781 L212.5,575.5781 L202.5,565.5781" fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Helvetica" font-size="10" x="71.5" y="579.8604">DCR Response Body:</text><text fill="#000000" font-family="Helvetica" font-size="10" x="71.5" y="591.501">{</text><text fill="#000000" font-family="Helvetica" font-size="10" x="71.5" y="603.1416">"client_id": "&lt;client-id&gt;",</text><text fill="#000000" font-family="Helvetica" font-size="10" x="71.5" y="614.7822">"client_id_issued_at": ...,</text><text fill="#000000" font-family="Helvetica" font-size="10" x="71.5" y="626.4229">// ...</text><text fill="#000000" font-family="Helvetica" font-size="10" x="71.5" y="638.0635">}</text><!--SRC=[XLJRRjiu47tdLymg3qtW-j8y2aK0Nr8tRTeOje6YNHS2ROqbnZAf9IcdJj2_sJ_P7-jGb6Mjaw9FkioPopbpI5vO9Olj4ZK4vxtUHS3CHiYSQxw56DUyoEmx9UrCF2AywRqS_Cot2Eynsw4LAzx0Z3pcavBAv7o5SOqUga8Br0riXZAnQJ- -Bum5gIGsOWR_AL2kS8fhrEvbm5URHAj2naELAGrVKc6R2RFJX2E7IzPzzIUWtMS8IvN5x5MNiRzopPCj1ulg4QmkaB6b-W71xVLD06VZL1dh-mEK_oTQRF_xLvkziRWbn2tVeOo9B425-7OzxyCm4oWjnMTSnlk1LW-oH03GQ2IaoBcq5GguyLaBMQMLK2hh2hBJf6_zMPq1VMlHM6w5aaHNxyGA5_Ay7s-512sIr9eBL-rGw_3q7FjoAT2YfZ7dryFtd-zkxyPVMPF6kE0wViwYEKw_iAaVQ3AQBAJxL5ey7aUY-i-I23eQ799WD6ZEU11oVWENdHwCI14opTc8wyqC-LWZlYJbrCymHKFcSo8qMp-ZNmdVQZ76iteFALMGwl1rGsqvcGO-ufwgL7_RLuUt4COeKNEBfnaBIIamuSAvGYe2bAi8OPuA0nkAvHG3Ui-KJDgPs64CQtAwJH5MlfOuT2Vb5x8m3KIknOwwHbGekd-mXmnEojEJ3caf_HPf4N6dv4mSQyv4mA-irI8AaxlP7BeQ4q5-rkmuBAXrXJlBtFSoewCn6avXwWuLBMIWudq8JyGmy0D4aiv-44AmtLSsVks2YQRrH7QVew7Wt-K-WaBBaAot3ik3QaBbXWzBQDj1GwisADluOvLocM1PYT8qhZMQD2gZRhNVonRt3njN-ma2agJi0c_z2D5X9T6aM6PY5T5YeWzVFbx1T_XPvfQb8X8fLuBmRex8I-Ued4WTi9-bdaucvjMfvMpOeT93n4UCDtoh5SBCAbqxPfBHnPdINOHw8H-4JS7FwJm7vpJexE9a9sKXzhiYxDYwiHIMU_AUnSQmJgV3tAs18UJ4HyWauiUBv4ZHJzskERRRuGjDOQYHQjLisrVr6N49bxqtDUB_N2gGDrXI7cplC9ChQT1RZ3sne6RbTlBMVxL5V4M-ECOYOKo1CJ4X535ypRfTzspkh1xh5m00]--></g></svg>